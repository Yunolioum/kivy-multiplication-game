#:kivy 1.7.2

<GameBoard>:
    width: 500
    height: 500
    
    orientation: 'vertical'
    
    input: answer
    operand_center_y: root.top - 85
    
    success_dependant_graphics: time_and_again_button
    
    numpad: number_buttons
    
    equation_widget: equation
            
    Equation:
        id: equation
        
    NumericTextInput:
        id: answer
        height: 100
        width: 400
        font_name: app.default_font_name
        font_size: 50
        center_x: root.center_x
        center_y: -1 * (root.center_y + root.height / 16 * 3)
        multiline: False
        readonly: root.input_is_correct
        
    Label:
        id: answer_presentation
        height: 100
        width: 400
        halign: 'center'
        font_name: app.default_font_name
        font_size: 40
        center_x: root.center_x
        center_y: root.center_y + root.height / 16 * 3
        text: str(root._current_guess)
    
    SuccessDependantGraphics:
        id: time_and_again_button
        x: 0.8 * root.width
        center_y: self.position_y_multiplier * (root.center_y + root.height / 4)
        
    Numpad:
        id: number_buttons
        top: 0.6 * root.height
        center_x: root.center_x
        
[Equation@Widget]:
    operand1: operand_left
    operand2: operand_right
    
    Label:
        id: operand_left
        font_size: 70
        font_name: app.default_font_name
        center_x: root.width / 2 - root.width / 10
        halign: 'right'
        text: str(app.randomize_operand())
    
    Label:
        id: operator
        font_size: 70
        font_name: app.default_font_name
        center_x: root.width / 2
        halign: 'center'
        text: 'âˆ™'
        
    Label:
        id: operand_right
        font_size: 70
        font_name: app.default_font_name
        center_x: root.width / 2 + root.width / 10
        halign: 'left'
        text: str(app.randomize_operand())
        
<SuccessDependantGraphics>:
    new_game_button: button
    
    Label:
        id: time_to_solve_label
        font_size: 14
        center_x: root.center_x
        center_y: root.center_y + root.height / 4
        text: root.time_to_solve
        
    Button:
        id: button
        text: 'Again'
        center_x: root.center_x
        center_y: root.center_y - root.height / 8 * 3
        font_size: 20

<Numpad>:
    #Paint it red so we know where it is...
    
    canvas.before:
        Color:
            rgba: 1, 0, 0, 0.3 #red
        Rectangle:
            pos: self.pos
            size: self.size
            
    cols: 3
    
    NumButton:
        id: num_1
        text: '1'
        on_press: root.numbutton_pressed(self, self.text)
        
    NumButton:
        id: num_2
        text: '2'
        on_press: root.numbutton_pressed(self, self.text)
        
    NumButton:
        id: num_3
        text: '3'
        on_press: root.numbutton_pressed(self, self.text)
        
    NumButton:
        id: num_4
        text: '4'
        on_press: root.numbutton_pressed(self, self.text)
        
    NumButton:
        id: num_5
        text: '5'
        on_press: root.numbutton_pressed(self, self.text)
        
    NumButton:
        id: num_6
        text: '6'
        on_press: root.numbutton_pressed(self, self.text)
        
    NumButton:
        id: num_7
        text: '7'
        on_press: root.numbutton_pressed(self, self.text)
        
    NumButton:
        id: num_8
        text: '8'
        on_press: root.numbutton_pressed(self, self.text)
        
    NumButton:
        id: num_9
        text: '9'
        on_press: root.numbutton_pressed(self, self.text)
        
    Label:
        id: num_empty_0
        
    NumButton:
        id: num_0
        text: '0'
        on_press: root.numbutton_pressed(self, self.text)
        
    NumButton:
        id: erase
        text: 'X'
        on_press: root.erase_pressed(self)
        
            
<NumButton>:
    font_name: 'fonts/Scratch.ttf'
    font_size: 60
    background_normal: 'images/button-normal-black.png'
    background_down: 'images/button-pressed-black.png'
    halign: 'center'
    size_hint: (None, None)
